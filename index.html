function showOverlay() {
  document.getElementById("overlay").style.display = "flex";
}

function hideOverlay() {
  document.getElementById("overlay").style.display = "none";
}

function renderTable() {
  showOverlay(); // show overlay

  setTimeout(() => { // allow DOM to update before filtering
    const selected = {};
    factors.forEach(f => {
      const checked = Array.from(document.querySelectorAll(`.filter-checkbox[data-factor="${f.name}"]:checked`))
                      .map(cb => cb.value);
      selected[f.name] = checked;
    });

    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    tableData.forEach(row => {
      const match = factors.every((f,i) => {
        const key = Object.keys(row)[filterColumns[i]];
        const val = row[key]?.toString().trim();
        if(selected[f.name].length === 0) return true;
        return selected[f.name].includes(val);
      });
      if(match) {
        tbody.innerHTML += "<tr>" + Object.values(row).map(c => "<td>"+c+"</td>").join("") + "</tr>";
      }
    });

    hideOverlay(); // hide overlay after filtering
  }, 10);
}
